<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Scavenger Scrabble: 2-Player Edition</title>
    <style>
        :root { --cell-size: 40px; --p1-color: #3b82f6; --p2-color: #ef4444; }
        body { font-family: 'Comic Sans MS', sans-serif; background: #f8fafc; display: flex; flex-direction: column; align-items: center; }
        
        .game-header { text-align: center; margin: 10px; padding: 10px; border-radius: 10px; width: 80%; color: white; transition: 0.3s; }
        .p1-turn { background: var(--p1-color); }
        .p2-turn { background: var(--p2-color); }

        .main-layout { display: flex; gap: 20px; align-items: flex-start; margin-top: 10px; }
        
        /* Board */
        .board { display: grid; grid-template-columns: repeat(15, var(--cell-size)); grid-template-rows: repeat(15, var(--cell-size)); gap: 2px; background: #475569; padding: 5px; border: 4px solid #1e293b; }
        .board-cell { width: var(--cell-size); height: var(--cell-size); background: white; display: flex; align-items: center; justify-content: center; font-weight: bold; cursor: pointer; position: relative; }
        .icon-square::after { content: attr(data-icon); position: absolute; font-size: 12px; bottom: 0; right: 0; opacity: 0.5; }

        /* Bingo Grid */
        .bingo-container { text-align: center; }
        .bingo-grid { display: grid; grid-template-columns: repeat(9, 30px); gap: 2px; background: #cbd5e1; padding: 5px; }
        .bingo-cell { width: 30px; height: 30px; background: white; font-size: 14px; display: flex; align-items: center; justify-content: center; }
        .marked { background: #4ade80 !important; }

        /* Rack */
        .rack-container { margin: 20px; padding: 15px; background: #e2e8f0; border-radius: 10px; width: 500px; text-align: center; }
        .tile { display: inline-block; width: 40px; height: 45px; background: #fef3c7; border: 2px solid #d97706; border-radius: 5px; 
                line-height: 45px; font-size: 24px; font-weight: bold; margin: 5px; cursor: pointer; user-select: none; }
        .tile.selected { background: #fbbf24; transform: translateY(-5px); box-shadow: 0 5px 10px rgba(0,0,0,0.2); }
        
        .hidden { display: none; }
        button { padding: 10px 25px; font-size: 18px; cursor: pointer; background: #059669; color: white; border: none; border-radius: 8px; }
    </style>
</head>
<body>

    <div id="turn-indicator" class="game-header p1-turn">
        <h2 id="turn-text">Player 1's Turn</h2>
    </div>

    <div class="main-layout">
        <div id="board" class="board"></div>

        <div class="bingo-area">
            <div id="p1-bingo-zone" class="bingo-container">
                <h4>P1 Bingo Card</h4>
                <div id="p1-bingo" class="bingo-grid"></div>
            </div>
            <div id="p2-bingo-zone" class="bingo-container hidden">
                <h4>P2 Bingo Card</h4>
                <div id="p2-bingo" class="bingo-grid"></div>
            </div>
        </div>
    </div>

    <div class="rack-container">
        <div id="current-rack"></div>
        <br>
        <button onclick="finishTurn()">Finish Turn (Next Player)</button>
    </div>

<script>
    const icons = ['ðŸŽ', 'ðŸš€', 'ðŸ¦', 'ðŸ•', 'ðŸ’Ž', 'ðŸŒˆ', 'ðŸŽ¸', 'ðŸ¦', 'ðŸŽˆ'];
    const alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    let currentPlayer = 1;
    let selectedTileIndex = null;
    let iconMap = {}; // { "r-c": "icon" }

    let gameState = {
        p1: { rack: [], bingo: [] },
        p2: { rack: [], bingo: [] }
    };

    function init() {
        generateIconMap();
        createBoard();
        gameState.p1.rack = Array.from({length: 10}, () => alphabet[Math.floor(Math.random()*26)]);
        gameState.p2.rack = Array.from({length: 10}, () => alphabet[Math.floor(Math.random()*26)]);
        gameState.p1.bingo = Array.from({length: 81}, () => icons[Math.floor(Math.random()*9)]);
        gameState.p2.bingo = Array.from({length: 81}, () => icons[Math.floor(Math.random()*9)]);
        
        renderBingo(1);
        renderBingo(2);
        renderRack();
    }

    function generateIconMap() {
        let spots = new Set();
        while(spots.size < 30) spots.add(Math.floor(Math.random() * 225));
        spots.forEach(s => {
            iconMap[`${Math.floor(s/15)}-${s%15}`] = icons[Math.floor(Math.random()*9)];
        });
    }

    function createBoard() {
        const board = document.getElementById('board');
        for(let r=0; r<15; r++) {
            for(let c=0; c<15; c++) {
                const cell = document.createElement('div');
                cell.className = 'board-cell';
                if(iconMap[`${r}-${c}`]) {
                    cell.classList.add('icon-square');
                    cell.setAttribute('data-icon', iconMap[`${r}-${c}`]);
                }
                cell.onclick = () => placeTile(r, c);
                cell.id = `cell-${r}-${c}`;
                board.appendChild(cell);
            }
        }
    }

    function renderBingo(playerNum) {
        const grid = document.getElementById(`p${playerNum}-bingo`);
        grid.innerHTML = '';
        gameState[`p${playerNum}`].bingo.forEach((icon, i) => {
            const cell = document.createElement('div');
            cell.className = 'bingo-cell';
            cell.id = `p${playerNum}-bingo-${i}`;
            cell.innerText = icon;
            grid.appendChild(cell);
        });
    }

    function renderRack() {
        const rackDiv = document.getElementById('current-rack');
        rackDiv.innerHTML = '';
        const currentRack = gameState[`p${currentPlayer}`].rack;
        currentRack.forEach((letter, i) => {
            const t = document.createElement('div');
            t.className = 'tile' + (selectedTileIndex === i ? ' selected' : '');
            t.innerText = letter;
            t.onclick = () => { selectedTileIndex = i; renderRack(); };
            rackDiv.appendChild(t);
        });
    }

    function placeTile(r, c) {
        const cell = document.getElementById(`cell-${r}-${c}`);
        if (selectedTileIndex !== null && cell.innerText === "") {
            const letter = gameState[`p${currentPlayer}`].rack[selectedTileIndex];
            cell.innerText = letter;
            
            // Check Icon
            const icon = iconMap[`${r}-${c}`];
            if(icon) markBingoCard(icon);

            // Remove from rack
            gameState[`p${currentPlayer}`].rack.splice(selectedTileIndex, 1);
            selectedTileIndex = null;
            renderRack();
        }
    }

    function markBingoCard(icon) {
        const playerData = gameState[`p${currentPlayer}`];
        playerData.bingo.forEach((item, i) => {
            if(item === icon) {
                document.getElementById(`p${currentPlayer}-bingo-${i}`).classList.add('marked');
            }
        });
    }

    function finishTurn() {
        // Refill rack to 10
        while(gameState[`p${currentPlayer}`].rack.length < 10) {
            gameState[`p${currentPlayer}`].rack.push(alphabet[Math.floor(Math.random()*26)]);
        }

        // Switch Player
        currentPlayer = currentPlayer === 1 ? 2 : 1;
        
        // Update UI
        const indicator = document.getElementById('turn-indicator');
        const text = document.getElementById('turn-text');
        indicator.className = `game-header p${currentPlayer}-turn`;
        text.innerText = `Player ${currentPlayer}'s Turn`;
        
        document.getElementById('p1-bingo-zone').classList.toggle('hidden');
        document.getElementById('p2-bingo-zone').classList.toggle('hidden');
        
        selectedTileIndex = null;
        renderRack();
    }

    init();
</script>
</body>
</html>
